!function(e,t,n){function r(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function o(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return p[e.which]?p[e.which]:f[e.which]?f[e.which]:String.fromCharCode(e.which).toLowerCase()}function i(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function a(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function c(e,t){var n,r=[],o=e;for("+"===o?o=["+"]:(o=o.replace(/\+{2}/g,"+plus"),o=o.split("+")),n=0;n<o.length;++n){var i=o[n];d[i]&&(i=d[i]),t&&"keypress"!=t&&h[i]&&(i=h[i],r.push("shift")),a(i)&&r.push(i)}if(o=i,!(n=t)){if(!u){u={};for(var c in p)95<c&&112>c||p.hasOwnProperty(c)&&(u[p[c]]=c)}n=u[o]?"keydown":"keypress"}return"keypress"==n&&r.length&&(n="keydown"),{key:i,modifiers:r,action:n}}function s(e,n){return null!==e&&e!==t&&(e===n||s(e.parentNode,n))}function l(e){function n(e){e=e||{};var t,n=!1;for(t in m)e[t]?n=!0:m[t]=0;n||(b=!1)}function s(e,t,n,r,o,i){var c,s=[],l=n.type;if(!d._callbacks[e])return[];for("keyup"==l&&a(e)&&(t=[e]),c=0;c<d._callbacks[e].length;++c){var u=d._callbacks[e][c];if((r||!u.seq||m[u.seq]==u.level)&&l==u.action){var p;(p="keypress"==l&&!n.metaKey&&!n.ctrlKey)||(p=u.modifiers,p=t.sort().join(",")===p.sort().join(",")),p&&(p=r&&u.seq==r&&u.level==i,(!r&&u.combo==o||p)&&d._callbacks[e].splice(c,1),s.push(u))}}return s}function u(e,t,n,r){d.stopCallback(t,t.target||t.srcElement,n,r)||!1!==e(t,n)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function p(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=o(e);t&&("keyup"==e.type&&k===t?k=!1:d.handleKey(t,i(e),e))}function f(e,t,r,i){function a(t){u(r,t,e),"keyup"!==i&&(k=o(t)),setTimeout(n,10)}for(var s=m[e]=0;s<t.length;++s){var l=s+1===t.length?a:function(t){return function(){b=t,++m[e],clearTimeout(y),y=setTimeout(n,1e3)}}(i||c(t[s+1]).action);h(t[s],l,i,e,s)}}function h(e,t,n,r,o){d._directMap[e+":"+n]=t,e=e.replace(/\s+/g," ");var i=e.split(" ");1<i.length?f(e,i,t,n):(n=c(e,n),d._callbacks[n.key]=d._callbacks[n.key]||[],s(n.key,n.modifiers,{type:n.action},r,e,o),d._callbacks[n.key][r?"unshift":"push"]({callback:t,modifiers:n.modifiers,action:n.action,seq:r,level:o,combo:e}))}var d=this;if(e=e||t,!(d instanceof l))return new l(e);d.target=e,d._callbacks={},d._directMap={};var y,m={},k=!1,v=!1,b=!1;d._handleKey=function(e,t,r){var o,i=s(e,t,r);t={};var c=0,l=!1;for(o=0;o<i.length;++o)i[o].seq&&(c=Math.max(c,i[o].level));for(o=0;o<i.length;++o)i[o].seq?i[o].level==c&&(l=!0,t[i[o].seq]=1,u(i[o].callback,r,i[o].combo,i[o].seq)):l||u(i[o].callback,r,i[o].combo);i="keypress"==r.type&&v,r.type!=b||a(e)||i||n(t),v=l&&"keydown"==r.type},d._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)h(e[r],t,n)},r(e,"keypress",p),r(e,"keydown",p),r(e,"keyup",p)}if(e){var u,p={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},f={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(n=1;20>n;++n)p[111+n]="f"+n;for(n=0;9>=n;++n)p[n+96]=n.toString();l.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},l.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},l.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},l.prototype.reset=function(){return this._callbacks={},this._directMap={},this},l.prototype.stopCallback=function(e,t){if(-1<(" "+t.className+" ").indexOf(" mousetrap ")||s(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},l.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},l.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(p[t]=e[t]);u=null},l.init=function(){var e,n=l(t);for(e in n)"_"!==e.charAt(0)&&(l[e]=function(e){return function(){return n[e].apply(n,arguments)}}(e))},l.init(),e.Mousetrap=l,"undefined"!=typeof module&&module.exports&&(module.exports=l),"function"==typeof define&&define.amd&&define(function(){return l})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null);